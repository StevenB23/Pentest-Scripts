#!/root/anaconda3/envs/pentest/bin/python

import sh
import os
import sys

mountpoint = 'priv-esc' # mount point for my priv-esc dir to have locally in my working dir
exploits_mount = 'exploits'
shells_mount = 'shells'
scripts_mount = 'scripts'
dirs = ['enum',exploits_mount,'exfiltrated',mountpoint,shells_mount,scripts_mount] #dirs to create with priv-esc to be used as mount point
try:
    ostype = sys.argv[1] #take first argument as the unix or windows
    for item in dirs:
        sh.mkdir(item) #loop through the dirs list and create each one in the current dir
    if ostype == 'windows': #conditional statements to check for windows or unix and make the proper mount point
        sh.mount('--bind','/root/priv-esc/windows/',mountpoint)
    elif ostype == 'unix':
        sh.mount('--bind','/root/priv-esc/unix/',mountpoint)
    else:
        print("must choose 'windows' or 'unix' for first arg")
        print("usage: dirtree.py [unix/windows]") #choose windows or unix to mount proper priv-esc point
    sh.mount('--bind','/root/exploits/',exploits_mount) #start mounting the bind points for the created dirs(these are OS indifferent)
    sh.mount('--bind','/root/shells/',shells_mount)
    sh.mount('--bind','/root/scripts/',scripts_mount)
except Exception as e:
    print(e)
    print("usage: dirtree.py [unix/windows]") #choose windows or unix to mount proper priv-esc point
